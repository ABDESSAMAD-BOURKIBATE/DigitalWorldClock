<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>دليل الصلاة التفاعلي</title>
  <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    :root {
      --primary-gold: linear-gradient(135deg, #ffd700 0%, #ffb347 100%);
      --secondary-gold: linear-gradient(135deg, #ffb347 0%, #ffa500 100%);
      --dark-gold: linear-gradient(135deg, #daa520 0%, #b8860b 100%);
      --light-gold: linear-gradient(135deg, #fff8dc 0%, #fffacd 100%);
      --dark-bg: #1a1a1a;
      --darker-bg: #0f0f0f;
      --card-bg: rgba(255, 215, 0, 0.1);
      --text-light: #ffffff;
      --text-gold: #ffd700;
      --accent: #ff6b35;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Cairo', sans-serif;
      background: var(--darker-bg);
      background-image: 
        radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 179, 71, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(218, 165, 32, 0.1) 0%, transparent 50%);
      color: var(--text-light);
      overflow-x: hidden;
      min-height: 100vh;
    }

    .header {
      background: rgba(26, 26, 26, 0.95);
      backdrop-filter: blur(20px);
      padding: 15px 0;
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 1000;
      box-shadow: 0 8px 32px rgba(255, 215, 0, 0.2);
      border-bottom: 2px solid rgba(255, 215, 0, 0.3);
    }

    .nav-container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
    }

    .logo {
      font-family: 'Amiri', serif;
      font-size: 28px;
      font-weight: 700;
      background: var(--primary-gold);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
    }

    .nav-tabs {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .nav-tab {
      padding: 12px 18px;
      background: rgba(255, 215, 0, 0.1);
      border: 2px solid rgba(255, 215, 0, 0.3);
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Cairo', sans-serif;
      font-weight: 600;
      color: var(--text-gold);
      backdrop-filter: blur(10px);
      font-size: 14px;
    }

    .nav-tab:hover, .nav-tab.active {
      background: var(--primary-gold);
      color: var(--darker-bg);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
      border-color: #ffd700;
    }

    .menu-toggle {
      display: none;
      background: rgba(255, 215, 0, 0.1);
      border: 2px solid rgba(255, 215, 0, 0.3);
      border-radius: 10px;
      color: var(--text-gold);
      font-size: 18px;
      padding: 10px 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .menu-toggle:hover {
      background: var(--primary-gold);
      color: var(--darker-bg);
    }

    .container {
      max-width: 1200px;
      margin: 100px auto 60px;
      padding: 0 20px;
    }

    .tab-content {
      display: none;
      animation: fadeInUp 0.6s ease;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .hero-card {
      background: rgba(26, 26, 26, 0.8);
      backdrop-filter: blur(20px);
      border-radius: 25px;
      padding: 40px;
      margin-bottom: 30px;
      box-shadow: 0 20px 60px rgba(255, 215, 0, 0.1);
      border: 2px solid rgba(255, 215, 0, 0.3);
      position: relative;
      overflow: hidden;
    }

    .hero-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--primary-gold);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      margin-bottom: 30px;
    }

    .card {
      background: rgba(26, 26, 26, 0.8);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      border: 2px solid rgba(255, 215, 0, 0.3);
      position: relative;
      overflow: hidden;
    }

    .card:hover {
      transform: translateY(-10px);
      box-shadow: 0 25px 50px rgba(255, 215, 0, 0.2);
      border-color: #ffd700;
    }

    .card-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: var(--primary-gold);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
      color: var(--darker-bg);
      font-size: 24px;
      box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
    }

    .card-title {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 15px;
      color: var(--text-gold);
    }

    .step-list {
      list-style: none;
      padding: 0;
    }

    .step-item {
      display: flex;
      align-items: center;
      padding: 15px;
      margin-bottom: 10px;
      background: rgba(255, 215, 0, 0.1);
      border-radius: 15px;
      transition: all 0.3s ease;
      cursor: pointer;
      border-right: 4px solid #ffd700;
    }

    .step-item:hover, .step-item.active {
      background: rgba(255, 215, 0, 0.2);
      transform: translateX(-10px);
      box-shadow: 0 5px 20px rgba(255, 215, 0, 0.2);
    }

    .step-number {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: var(--primary-gold);
      color: var(--darker-bg);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-left: 15px;
      font-weight: 700;
    }

    .prayer-times {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }

    .prayer-time {
      background: rgba(26, 26, 26, 0.8);
      backdrop-filter: blur(15px);
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      transition: all 0.3s ease;
      border: 2px solid rgba(255, 215, 0, 0.3);
    }

    .prayer-time:hover, .prayer-time.current {
      border-color: #ffd700;
      transform: scale(1.05);
      box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
    }

    .prayer-time.current {
      background: var(--primary-gold);
      color: var(--darker-bg);
    }

    .prayer-name {
      font-weight: 700;
      font-size: 16px;
      margin-bottom: 10px;
    }

    .prayer-time-value {
      font-size: 20px;
      font-weight: 700;
      font-family: 'Amiri', serif;
    }

    .qibla-compass {
      width: 200px;
      height: 200px;
      margin: 30px auto;
      position: relative;
      background: conic-gradient(from 0deg, #ffd700, #ffb347, #ffd700);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: rotate 20s linear infinite;
      box-shadow: 0 0 50px rgba(255, 215, 0, 0.3);
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .compass-inner {
      width: 160px;
      height: 160px;
      background: var(--darker-bg);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      box-shadow: inset 0 0 30px rgba(255, 215, 0, 0.2);
      border: 2px solid rgba(255, 215, 0, 0.5);
    }

    .compass-needle {
      width: 4px;
      height: 60px;
      background: linear-gradient(to top, #ff6b35, #ffd700);
      border-radius: 2px;
      position: absolute;
      top: 50px;
      transform-origin: bottom center;
    }

    .dua-card {
      background: rgba(26, 26, 26, 0.8);
      border: 2px solid rgba(255, 215, 0, 0.5);
      border-radius: 20px;
      padding: 25px;
      margin-bottom: 20px;
      position: relative;
      transition: all 0.3s ease;
    }

    .dua-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(255, 215, 0, 0.2);
      border-color: #ffd700;
    }

    .dua-text {
      font-family: 'Amiri', serif;
      font-size: 18px;
      line-height: 1.8;
      text-align: center;
      margin-bottom: 15px;
      color: var(--text-light);
    }

    .audio-controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .audio-btn {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--primary-gold);
      border: none;
      color: var(--darker-bg);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      font-size: 18px;
      position: relative;
    }

    .audio-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
    }

    .progress-circle {
      width: 100px;
      height: 100px;
      margin: 20px auto;
      position: relative;
    }

    .progress-ring {
      transform: rotate(-90deg);
    }

    .progress-ring-circle {
      stroke: rgba(255, 215, 0, 0.3);
      stroke-width: 8;
      fill: transparent;
      r: 40;
      cx: 50;
      cy: 50;
    }

    .progress-ring-fill {
      stroke: #ffd700;
      stroke-width: 8;
      fill: transparent;
      r: 40;
      cx: 50;
      cy: 50;
      stroke-dasharray: 251.2;
      stroke-dashoffset: 251.2;
      transition: stroke-dashoffset 0.5s ease;
    }

    .floating-action {
      position: fixed;
      bottom: 30px;
      left: 30px;
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: var(--primary-gold);
      border: none;
      color: var(--darker-bg);
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .floating-action:hover {
      transform: scale(1.1) rotate(15deg);
      box-shadow: 0 12px 35px rgba(255, 215, 0, 0.6);
    }

    .notification {
      position: fixed;
      top: 100px;
      left: 20px;
      background: rgba(26, 26, 26, 0.95);
      backdrop-filter: blur(20px);
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      border-right: 4px solid #ffd700;
      transform: translateX(-400px);
      transition: all 0.3s ease;
      z-index: 1001;
      max-width: 300px;
      border: 2px solid rgba(255, 215, 0, 0.3);
    }

    .notification.show {
      transform: translateX(0);
    }

    .counter-badge {
      position: absolute;
      top: -10px;
      right: -10px;
      background: #ff6b35;
      color: white;
      border-radius: 50%;
      width: 25px;
      height: 25px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 700;
    }

    .adhan-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .sheikh-card {
      background: rgba(26, 26, 26, 0.8);
      border: 2px solid rgba(255, 215, 0, 0.3);
      border-radius: 20px;
      padding: 25px;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .sheikh-card:hover {
      transform: translateY(-5px);
      border-color: #ffd700;
      box-shadow: 0 15px 40px rgba(255, 215, 0, 0.2);
    }

    .sheikh-image {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: var(--primary-gold);
      margin: 0 auto 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 25px;
      color: var(--darker-bg);
    }

    .sheikh-name {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-gold);
      margin-bottom: 10px;
    }

    .sheikh-description {
      font-size: 13px;
      color: var(--text-light);
      opacity: 0.8;
      margin-bottom: 15px;
    }

    .language-section {
      background: rgba(26, 26, 26, 0.8);
      backdrop-filter: blur(20px);
      border-radius: 25px;
      padding: 40px;
      margin-bottom: 30px;
      box-shadow: 0 20px 60px rgba(255, 215, 0, 0.1);
      border: 2px solid rgba(255, 215, 0, 0.3);
      text-align: center;
    }

    .language-toggle {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .lang-btn {
      padding: 15px 30px;
      background: rgba(255, 215, 0, 0.1);
      border: 2px solid rgba(255, 215, 0, 0.3);
      border-radius: 25px;
      color: var(--text-gold);
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 16px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .lang-btn.active, .lang-btn:hover {
      background: var(--primary-gold);
      color: var(--darker-bg);
      border-color: #ffd700;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
    }

    .footer {
      background: rgba(26, 26, 26, 0.95);
      backdrop-filter: blur(20px);
      padding: 30px 0;
      text-align: center;
      border-top: 2px solid rgba(255, 215, 0, 0.3);
      margin-top: 50px;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .developer-info {
      color: var(--text-gold);
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .copyright {
      color: var(--text-light);
      opacity: 0.8;
      font-size: 14px;
    }

    .floating-shape {
      position: absolute;
      background: rgba(255, 215, 0, 0.1);
      border-radius: 50%;
      animation: float 15s ease-in-out infinite;
    }

    .floating-shape:nth-child(1) { width: 60px; height: 60px; top: 20%; right: 10%; animation-delay: 0s; }
    .floating-shape:nth-child(2) { width: 40px; height: 40px; top: 60%; right: 80%; animation-delay: 3s; }
    .floating-shape:nth-child(3) { width: 80px; height: 80px; top: 80%; right: 20%; animation-delay: 6s; }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      33% { transform: translate(30px, -30px) rotate(120deg); }
      66% { transform: translate(-20px, 20px) rotate(240deg); }
    }

    .active-playing {
      animation: pulse 1s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    /* تحسينات للأجهزة المحمولة */
    @media (max-width: 768px) {
      .nav-tabs { 
        display: none;
      }
      
      .menu-toggle {
        display: block;
      }
      
      .nav-tabs.mobile-show {
        display: flex;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: rgba(26, 26, 26, 0.98);
        backdrop-filter: blur(20px);
        flex-direction: column;
        padding: 20px;
        gap: 10px;
        border-top: 2px solid rgba(255, 215, 0, 0.3);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      }
      
      .nav-tab { 
        padding: 15px 20px; 
        font-size: 16px;
        justify-content: center;
        width: 100%;
      }
      
      .hero-card { 
        padding: 25px;
        margin-bottom: 20px;
      }
      
      .grid { 
        grid-template-columns: 1fr;
        gap: 15px;
      }
      
      .qibla-compass { 
        width: 180px; 
        height: 180px; 
      }
      
      .compass-inner { 
        width: 140px; 
        height: 140px; 
      }
      
      .compass-needle {
        height: 50px;
        top: 45px;
      }
      
      .container {
        margin-top: 90px;
        padding: 0 15px;
      }
      
      .prayer-times {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
      }
      
      .prayer-time {
        padding: 15px 10px;
      }
      
      .prayer-name {
        font-size: 14px;
      }
      
      .prayer-time-value {
        font-size: 18px;
      }
      
      .adhan-section {
        grid-template-columns: 1fr;
        gap: 15px;
      }
      
      .sheikh-card {
        padding: 20px;
      }
      
      .sheikh-image {
        width: 60px;
        height: 60px;
        font-size: 20px;
      }
      
      .sheikh-name {
        font-size: 15px;
      }
      
      .sheikh-description {
        font-size: 12px;
      }
      
      .dua-text {
        font-size: 16px;
      }
      
      .language-toggle {
        flex-direction: column;
        gap: 15px;
        align-items: center;
      }
      
      .lang-btn {
        width: 100%;
        max-width: 250px;
        justify-content: center;
      }
      
      .floating-action {
        bottom: 20px;
        left: 20px;
        width: 60px;
        height: 60px;
        font-size: 20px;
      }
      
      .notification {
        left: 10px;
        right: 10px;
        max-width: none;
      }
      
      .step-item {
        padding: 12px;
        font-size: 14px;
      }
      
      .step-number {
        width: 25px;
        height: 25px;
        font-size: 12px;
        margin-left: 10px;
      }
      
      .card-title {
        font-size: 18px;
      }
      
      .card {
        padding: 20px;
      }
      
      .card-icon {
        width: 50px;
        height: 50px;
        font-size: 20px;
      }
    }

    @media (max-width: 480px) {
      .logo {
        font-size: 20px;
      }
      
      .hero-card {
        padding: 15px;
      }
      
      .card {
        padding: 15px;
      }
      
      .qibla-compass {
        width: 150px;
        height: 150px;
      }
      
      .compass-inner {
        width: 120px;
        height: 120px;
      }
      
      .dua-text {
        font-size: 14px;
      }
      
      .audio-btn {
        width: 40px;
        height: 40px;
        font-size: 16px;
      }
      
      .progress-circle {
        width: 80px;
        height: 80px;
      }
      
      .floating-shape {
        display: none;
      }
    }

    /* تحسينات للأجهزة اللوحية */
    @media (min-width: 769px) and (max-width: 1024px) {
      .grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .adhan-section {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .prayer-times {
        grid-template-columns: repeat(3, 1fr);
      }
      
      .container {
        padding: 0 25px;
      }
    }

    /* تحسينات للشاشات الكبيرة */
    @media (min-width: 1200px) {
      .grid {
        grid-template-columns: repeat(3, 1fr);
      }
      
      .adhan-section {
        grid-template-columns: repeat(3, 1fr);
      }
      
      .prayer-times {
        grid-template-columns: repeat(6, 1fr);
      }
      
      .container {
        padding: 0 40px;
      }
    }
  </style>
</head>

<body>
  <div class="floating-shape"></div>
  <div class="floating-shape"></div>
  <div class="floating-shape"></div>

  <header class="header">
    <div class="nav-container">
      <div class="logo">
        <i class="fas fa-mosque"></i>
        دليل الصلاة التفاعلي
      </div>
      <button class="menu-toggle" onclick="toggleMobileMenu()">
        <i class="fas fa-bars"></i>
      </button>
      <div class="nav-tabs" id="nav-tabs">
        <button class="nav-tab active" onclick="showTab('home')">
          <i class="fas fa-home"></i> الرئيسية
        </button>
        <button class="nav-tab" onclick="showTab('wudu')">
          <i class="fas fa-hand-sparkles"></i> الوضوء
        </button>
        <button class="nav-tab" onclick="showTab('prayer')">
          <i class="fas fa-praying-hands"></i> الصلاة
        </button>
        <button class="nav-tab" onclick="showTab('adhan')">
          <i class="fas fa-volume-up"></i> الأذان
        </button>
        <button class="nav-tab" onclick="showTab('qibla')">
          <i class="fas fa-compass"></i> القبلة
        </button>
        <button class="nav-tab" onclick="showTab('duas')">
          <i class="fas fa-book-open"></i> الأذكار
        </button>
        <button class="nav-tab" onclick="showTab('times')">
          <i class="fas fa-clock"></i> المواقيت
        </button>
        <button class="nav-tab" onclick="showTab('settings')">
          <i class="fas fa-cog"></i> الإعدادات
        </button>
      </div>
    </div>
  </header>

  <div class="container">
    <!-- الصفحة الرئيسية -->
    <div id="home" class="tab-content active">
      <div class="hero-card">
        <h1 style="text-align: center; font-size: 36px; margin-bottom: 20px; background: var(--primary-gold); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
          <i class="fas fa-mosque"></i>
          مرحباً بك في دليل الصلاة التفاعلي
        </h1>
        <p style="text-align: center; font-size: 18px; line-height: 1.8; color: var(--text-light); margin-bottom: 30px; opacity: 0.9;">
          دليلك الشامل لتعلم الصلاة والوضوء مع ميزات تفاعلية متطورة وأذان الشيوخ المميزين
        </p>
        <div class="audio-controls">
          <button class="audio-btn" onclick="playWelcomeAudio()">
            <i class="fas fa-play"></i>
          </button>
        </div>
      </div>

      <div class="grid">
        <div class="card" onclick="showTab('wudu')">
          <div class="card-icon">
            <i class="fas fa-hand-sparkles"></i>
          </div>
          <h3 class="card-title">تعلم الوضوء</h3>
          <p>خطوات الوضوء الصحيح مع الإرشادات الصوتية والمرئية</p>
        </div>

        <div class="card" onclick="showTab('prayer')">
          <div class="card-icon">
            <i class="fas fa-praying-hands"></i>
          </div>
          <h3 class="card-title">أداء الصلاة</h3>
          <p>دليل شامل لأداء الصلاة مع التوجيه خطوة بخطوة</p>
        </div>

        <div class="card" onclick="showTab('adhan')">
          <div class="card-icon">
            <i class="fas fa-volume-up"></i>
          </div>
          <h3 class="card-title">أذان الشيوخ</h3>
          <p>استمع لأذان أشهر المؤذنين والشيوخ حول العالم</p>
        </div>

        <div class="card" onclick="showTab('qibla')">
          <div class="card-icon">
            <i class="fas fa-compass"></i>
          </div>
          <h3 class="card-title">اتجاه القبلة</h3>
          <p>بوصلة ذكية لتحديد اتجاه القبلة بدقة</p>
        </div>

        <div class="card" onclick="showTab('duas')">
          <div class="card-icon">
            <i class="fas fa-book-open"></i>
          </div>
          <h3 class="card-title">الأذكار والأدعية</h3>
          <p>مجموعة شاملة من الأذكار اليومية والأدعية المأثورة</p>
        </div>

        <div class="card" onclick="showTab('times')">
          <div class="card-icon">
            <i class="fas fa-clock"></i>
          </div>
          <h3 class="card-title">مواقيت الصلاة</h3>
          <p>أوقات الصلاة الدقيقة مع التنبيهات الذكية</p>
        </div>
      </div>
    </div>

    <!-- قسم الوضوء -->
    <div id="wudu" class="tab-content">
      <div class="hero-card">
        <h2 style="text-align: center; margin-bottom: 30px; color: var(--text-gold);">
          <i class="fas fa-hand-sparkles"></i>
          دليل الوضوء التفاعلي
        </h2>
        
        <div class="progress-circle">
          <svg class="progress-ring" width="100" height="100">
            <circle class="progress-ring-circle"></circle>
            <circle class="progress-ring-fill" id="wudu-progress"></circle>
          </svg>
          <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-weight: 700; color: var(--text-gold);">
            <span id="wudu-step-number">1</span>/7
          </div>
        </div>

        <ul class="step-list" id="wudu-steps">
          <li class="step-item active" onclick="selectWuduStep(1)">
            <div class="step-number">1</div>
            <div>النية للوضوء في القلب</div>
          </li>
          <li class="step-item" onclick="selectWuduStep(2)">
            <div class="step-number">2</div>
            <div>غسل الكفين ثلاث مرات</div>
          </li>
          <li class="step-item" onclick="selectWuduStep(3)">
            <div class="step-number">3</div>
            <div>المضمضة والاستنشاق ثلاث مرات</div>
          </li>
          <li class="step-item" onclick="selectWuduStep(4)">
            <div class="step-number">4</div>
            <div>غسل الوجه ثلاث مرات من الأذن إلى الأذن</div>
          </li>
          <li class="step-item" onclick="selectWuduStep(5)">
            <div class="step-number">5</div>
            <div>غسل اليدين إلى المرفقين ثلاث مرات</div>
          </li>
          <li class="step-item" onclick="selectWuduStep(6)">
            <div class="step-number">6</div>
            <div>مسح الرأس والأذنين مرة واحدة</div>
          </li>
          <li class="step-item" onclick="selectWuduStep(7)">
            <div class="step-number">7</div>
            <div>غسل الرجلين إلى الكعبين ثلاث مرات</div>
          </li>
        </ul>

        <div class="audio-controls">
          <button class="audio-btn" onclick="playStepAudio()">
            <i class="fas fa-play"></i>
          </button>
          <button class="audio-btn" onclick="pauseAudio()">
            <i class="fas fa-pause"></i>
          </button>
          <button class="audio-btn" onclick="resetWudu()">
            <i class="fas fa-redo"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- قسم الصلاة -->
    <div id="prayer" class="tab-content">
      <div class="hero-card">
        <h2 style="text-align: center; margin-bottom: 30px; color: var(--text-gold);">
          <i class="fas fa-praying-hands"></i>
          دليل الصلاة التفاعلي
        </h2>

        <div class="grid">
          <div class="card">
            <h3 class="card-title">أركان الصلاة</h3>
            <ul class="step-list">
              <li class="step-item" onclick="playPrayerStep(1)">
                <div class="step-number">1</div>
                <div>القيام مع القدرة</div>
              </li>
              <li class="step-item" onclick="playPrayerStep(2)">
                <div class="step-number">2</div>
                <div>تكبيرة الإحرام</div>
              </li>
              <li class="step-item" onclick="playPrayerStep(3)">
                <div class="step-number">3</div>
                <div>قراءة الفاتحة</div>
              </li>
              <li class="step-item" onclick="playPrayerStep(4)">
                <div class="step-number">4</div>
                <div>الركوع والرفع منه</div>
              </li>
              <li class="step-item" onclick="playPrayerStep(5)">
                <div class="step-number">5</div>
                <div>السجود والجلوس بين السجدتين</div>
              </li>
              <li class="step-item" onclick="playPrayerStep(6)">
                <div class="step-number">6</div>
                <div>الجلوس للتشهد الأخير</div>
              </li>
              <li class="step-item" onclick="playPrayerStep(7)">
                <div class="step-number">7</div>
                <div>السلام</div>
              </li>
            </ul>
          </div>

          <div class="card">
            <h3 class="card-title">خطوات الصلاة</h3>
            <ul class="step-list">
              <li class="step-item" onclick="playDetailedPrayerStep(1)">
                <div class="step-number">1</div>
                <div>استقبال القبلة والنية</div>
              </li>
              <li class="step-item" onclick="playDetailedPrayerStep(2)">
                <div class="step-number">2</div>
                <div>تكبيرة الإحرام "الله أكبر"</div>
              </li>
              <li class="step-item" onclick="playDetailedPrayerStep(3)">
                <div class="step-number">3</div>
                <div>دعاء الاستفتاح</div>
              </li>
              <li class="step-item" onclick="playDetailedPrayerStep(4)">
                <div class="step-number">4</div>
                <div>قراءة الفاتحة وسورة</div>
              </li>
              <li class="step-item" onclick="playDetailedPrayerStep(5)">
                <div class="step-number">5</div>
                <div>الركوع مع التسبيح</div>
              </li>
              <li class="step-item" onclick="playDetailedPrayerStep(6)">
                <div class="step-number">6</div>
                <div>الرفع من الركوع</div>
              </li>
              <li class="step-item" onclick="playDetailedPrayerStep(7)">
                <div class="step-number">7</div>
                <div>السجود مرتين</div>
              </li>
              <li class="step-item" onclick="playDetailedPrayerStep(8)">
                <div class="step-number">8</div>
                <div>التشهد والسلام</div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- قسم الأذان -->
    <div id="adhan" class="tab-content">
      <div class="hero-card">
        <h2 style="text-align: center; margin-bottom: 30px; color: var(--text-gold);">
          <i class="fas fa-volume-up"></i>
          أذان الشيوخ المميزين
        </h2>

        <div class="adhan-section">
          <div class="sheikh-card" onclick="playAdhanSheikh('mishary')">
            <div class="sheikh-image">
              <i class="fas fa-mosque"></i>
            </div>
            <div class="sheikh-name">الشيخ مشاري العفاسي</div>
            <div class="sheikh-description">صوت جميل ومؤثر من الكويت</div>
            <div class="audio-controls">
              <button class="audio-btn">
                <i class="fas fa-play"></i>
              </button>
            </div>
          </div>

          <div class="sheikh-card" onclick="playAdhanSheikh('maher')">
            <div class="sheikh-image">
              <i class="fas fa-star-and-crescent"></i>
            </div>
            <div class="sheikh-name">الشيخ ماهر المعيقلي</div>
            <div class="sheikh-description">إمام المسجد الحرام بمكة المكرمة</div>
            <div class="audio-controls">
              <button class="audio-btn">
                <i class="fas fa-play"></i>
              </button>
            </div>
          </div>

          <div class="sheikh-card" onclick="playAdhanSheikh('sudais')">
            <div class="sheikh-image">
              <i class="fas fa-kaaba"></i>
            </div>
            <div class="sheikh-name">الشيخ عبد الرحمن السديس</div>
            <div class="sheikh-description">إمام المسجد الحرام السابق</div>
            <div class="audio-controls">
              <button class="audio-btn">
                <i class="fas fa-play"></i>
              </button>
            </div>
          </div>

          <div class="sheikh-card" onclick="playAdhanSheikh('ghamdi')">
            <div class="sheikh-image">
              <i class="fas fa-moon"></i>
            </div>
            <div class="sheikh-name">الشيخ سعد الغامدي</div>
            <div class="sheikh-description">قارئ مميز من المملكة العربية السعودية</div>
            <div class="audio-controls">
              <button class="audio-btn">
                <i class="fas fa-play"></i>
              </button>
            </div>
          </div>

          <div class="sheikh-card" onclick="playAdhanSheikh('tablawi')">
            <div class="sheikh-image">
              <i class="fas fa-minaret"></i>
            </div>
            <div class="sheikh-name">الشيخ محمد الطبلاوي</div>
            <div class="sheikh-description">مؤذن الأزهر الشريف</div>
            <div class="audio-controls">
              <button class="audio-btn">
                <i class="fas fa-play"></i>
              </button>
            </div>
          </div>

          <div class="sheikh-card" onclick="playAdhanSheikh('rifai')">
            <div class="sheikh-image">
              <i class="fas fa-star"></i>
            </div>
            <div class="sheikh-name">الشيخ محمد رفعت</div>
            <div class="sheikh-description">أسطورة الأذان المصري</div>
            <div class="audio-controls">
              <button class="audio-btn">
                <i class="fas fa-play"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- قسم القبلة -->
    <div id="qibla" class="tab-content">
      <div class="hero-card" style="text-align: center;">
        <h2 style="margin-bottom: 30px; color: var(--text-gold);">
          <i class="fas fa-compass"></i>
          بوصلة القبلة الذكية
        </h2>
        
        <div class="qibla-compass">
          <div class="compass-inner">
            <div class="compass-needle"></div>
            <div style="position: absolute; top: 10px; font-weight: 700; color: #ff6b35;">N</div>
            <div style="position: absolute; bottom: 10px; font-weight: 700; color: var(--text-light);">S</div>
            <div style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); font-weight: 700; color: var(--text-light);">W</div>
            <div style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); font-weight: 700; color: var(--text-light);">E</div>
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-weight: 700; color: var(--text-gold);">
              <i class="fas fa-kaaba"></i>
            </div>
          </div>
        </div>

        <p style="font-size: 18px; margin: 20px 0; color: var(--text-light);">
          اتجاه القبلة: <span style="font-weight: 700; color: var(--text-gold);" id="qibla-direction">شمال شرق</span>
        </p>
        
        <div class="audio-controls">
          <button class="audio-btn" onclick="findQibla()">
            <i class="fas fa-location-arrow"></i>
          </button>
          <button class="audio-btn" onclick="calibrateCompass()">
            <i class="fas fa-sync-alt"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- قسم الأذكار -->
    <div id="duas" class="tab-content">
      <div class="hero-card">
        <h2 style="text-align: center; margin-bottom: 30px; color: var(--text-gold);">
          <i class="fas fa-book-open"></i>
          الأذكار والأدعية
        </h2>

        <div class="dua-card">
          <div class="dua-text">
            أَشْهَدُ أَنْ لاَ إِلَهَ إِلاَّ اللَّهُ وَحْدَهُ لاَ شَرِيكَ لَهُ، وَأَشْهَدُ أَنَّ مُحَمَّدًا عَبْدُهُ وَرَسُولُهُ
          </div>
          <div class="audio-controls">
            <button class="audio-btn" onclick="playDua('shahada')">
              <i class="fas fa-play"></i>
            </button>
            <button class="audio-btn" onclick="repeatDua('shahada')">
              <i class="fas fa-repeat"></i>
            </button>
          </div>
        </div>

        <div class="dua-card">
          <div class="dua-text">
            سُبْحَانَ اللَّهِ وَالْحَمْدُ لِلَّهِ وَلاَ إِلَهَ إِلاَّ اللَّهُ وَاللَّهُ أَكْبَارُ
          </div>
          <div class="audio-controls">
            <button class="audio-btn" onclick="playDua('tasbih')">
              <i class="fas fa-play"></i>
            </button>
            <button class="audio-btn" onclick="startCounter()">
              <i class="fas fa-calculator"></i>
              <span class="counter-badge" id="counter">0</span>
            </button>
          </div>
        </div>

        <div class="dua-card">
          <div class="dua-text">
            اللَّهُمَّ أَنْتَ السَّلاَمُ وَمِنْكَ السَّلاَمُ، تَبَارَكْتَ يَا ذَا الْجَلاَلِ وَالإِكْرَامِ
          </div>
          <div class="audio-controls">
            <button class="audio-btn" onclick="playDua('after_prayer')">
              <i class="fas fa-play"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- قسم المواقيت -->
    <div id="times" class="tab-content">
      <div class="hero-card">
        <h2 style="text-align: center; margin-bottom: 30px; color: var(--text-gold);">
          <i class="fas fa-clock"></i>
          مواقيت الصلاة
        </h2>
        
        <div class="prayer-times">
          <div class="prayer-time">
            <div class="prayer-name">الفجر</div>
            <div class="prayer-time-value" id="fajr-time">05:30</div>
          </div>
          <div class="prayer-time">
            <div class="prayer-name">الشروق</div>
            <div class="prayer-time-value" id="sunrise-time">07:00</div>
          </div>
          <div class="prayer-time current">
            <div class="prayer-name">الظهر</div>
            <div class="prayer-time-value" id="dhuhr-time">12:45</div>
          </div>
          <div class="prayer-time">
            <div class="prayer-name">العصر</div>
            <div class="prayer-time-value" id="asr-time">16:15</div>
          </div>
          <div class="prayer-time">
            <div class="prayer-name">المغرب</div>
            <div class="prayer-time-value" id="maghrib-time">19:30</div>
          </div>
          <div class="prayer-time">
            <div class="prayer-name">العشاء</div>
            <div class="prayer-time-value" id="isha-time">21:00</div>
          </div>
        </div>

        <div style="text-align: center; margin-top: 30px;">
          <button class="audio-btn" onclick="playGeneralAdhan()" style="width: 80px; height: 80px; font-size: 24px;">
            <i class="fas fa-mosque"></i>
          </button>
          <p style="margin-top: 15px; color: var(--text-light); opacity: 0.8;">استماع للأذان</p>
        </div>
      </div>
    </div>

    <!-- قسم الإعدادات واللغة -->
    <div id="settings" class="tab-content">
      <div class="language-section">
        <h2 style="text-align: center; margin-bottom: 20px; color: var(--text-gold);">
          <i class="fas fa-cog"></i>
          إعدادات التطبيق
        </h2>
        <p style="text-align: center; font-size: 16px; line-height: 1.8; color: var(--text-light); margin-bottom: 30px; opacity: 0.9;">
          اختر اللغة المفضلة لديك وخصص تجربة الاستخدام
        </p>
        
        <div style="text-align: center; margin-bottom: 30px;">
          <h3 style="color: var(--text-gold); margin-bottom: 20px;">
            <i class="fas fa-language"></i>
            اختيار اللغة / Language Selection
          </h3>
          <div class="language-toggle">
            <button class="lang-btn active" onclick="setLanguage('ar')" id="lang-ar">
              <i class="fas fa-flag"></i>
              العربية
            </button>
            <button class="lang-btn" onclick="setLanguage('en')" id="lang-en">
              <i class="fas fa-flag"></i>
              English
            </button>
          </div>
        </div>

        <div style="text-align: center; margin-bottom: 30px;">
          <h3 style="color: var(--text-gold); margin-bottom: 20px;">
            <i class="fas fa-volume-up"></i>
            إعدادات الصوت (Text-to-Speech)
          </h3>
          <div style="display: flex; flex-wrap: wrap; gap: 15px; align-items: center; justify-content: center; margin-bottom: 10px;">
            <label>الصوت:
              <select id="tts-voice-select" style="padding: 5px 10px; border-radius: 8px;"></select>
            </label>
            <label>السرعة:
              <input type="range" id="tts-rate" min="0.5" max="1.5" step="0.05" value="1" style="vertical-align: middle;">
              <span id="tts-rate-value">1</span>
            </label>
            <label>النبرة:
              <input type="range" id="tts-pitch" min="0.5" max="2" step="0.05" value="1" style="vertical-align: middle;">
              <span id="tts-pitch-value">1</span>
            </label>
            <button class="audio-btn" onclick="testTTS()" style="margin-right: 10px;"><i class="fas fa-play"></i> اختبار الصوت</button>
          </div>
          <div id="tts-support-msg" style="color: #ff6b35; margin-top: 10px;"></div>
          <div class="audio-controls" style="margin-top: 10px;">
            <button class="audio-btn" onclick="toggleMute()">
              <i class="fas fa-volume-mute"></i>
            </button>
          </div>
        </div>

        <div style="text-align: center;">
          <h3 style="color: var(--text-gold); margin-bottom: 20px;">
            <i class="fas fa-palette"></i>
            إعدادات المظهر
          </h3>
          <div class="audio-controls">
            <button class="audio-btn" onclick="toggleTheme()">
              <i class="fas fa-moon"></i>
            </button>
            <button class="audio-btn" onclick="resetSettings()">
              <i class="fas fa-redo"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <button class="floating-action" onclick="showNotification()">
    <i class="fas fa-bell"></i>
  </button>

  <div class="notification" id="notification">
    <h4 style="margin-bottom: 10px; color: var(--text-gold);">
      <i class="fas fa-mosque"></i>
      تذكير الصلاة
    </h4>
    <p>حان وقت صلاة الظهر</p>
  </div>

  <footer class="footer">
    <div class="footer-content">
      <div class="developer-info">
        <i class="fas fa-code"></i>
        تطوير وتصميم: عبد الصمد بوركيبات
      </div>
      <div class="copyright">
        <i class="fas fa-copyright"></i>
        جميع الحقوق محفوظة © 2025
      </div>
    </div>
  </footer>

  <script>
    // تم إزالة الصوت التفاعلي الخفيف عند النقر أو المرور بناءً على طلب المستخدم
    // إعدادات TTS
    let ttsVoice = null;
    let ttsRate = 1;
    let ttsPitch = 1;

    function populateTTSVoices() {
      const voiceSelect = document.getElementById('tts-voice-select');
      if (!('speechSynthesis' in window)) {
        document.getElementById('tts-support-msg').textContent = 'متصفحك لا يدعم ميزة تحويل النص إلى كلام (Text-to-Speech)';
        voiceSelect.disabled = true;
        return;
      }
      const voices = speechSynthesis.getVoices();
      voiceSelect.innerHTML = '';
      voices.forEach((voice, i) => {
        const option = document.createElement('option');
        option.value = voice.name;
        option.textContent = `${voice.name} (${voice.lang})${voice.default ? ' - افتراضي' : ''}`;
        if ((currentLanguage === 'ar' && voice.lang.startsWith('ar')) || (currentLanguage === 'en' && voice.lang.startsWith('en'))) {
          option.selected = true;
          ttsVoice = voice;
        }
        voiceSelect.appendChild(option);
      });
      if (!ttsVoice && voices.length > 0) {
        ttsVoice = voices[0];
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      if ('speechSynthesis' in window) {
        populateTTSVoices();
        speechSynthesis.onvoiceschanged = populateTTSVoices;
      } else {
        document.getElementById('tts-support-msg').textContent = 'متصفحك لا يدعم ميزة تحويل النص إلى كلام (Text-to-Speech)';
      }
      document.getElementById('tts-rate').addEventListener('input', function() {
        ttsRate = parseFloat(this.value);
        document.getElementById('tts-rate-value').textContent = ttsRate;
      });
      document.getElementById('tts-pitch').addEventListener('input', function() {
        ttsPitch = parseFloat(this.value);
        document.getElementById('tts-pitch-value').textContent = ttsPitch;
      });
      document.getElementById('tts-voice-select').addEventListener('change', function() {
        const voices = speechSynthesis.getVoices();
        ttsVoice = voices.find(v => v.name === this.value);
      });
    });

    function testTTS() {
      speakText(currentLanguage === 'ar' ? 'هذا مثال لاختبار الصوت' : 'This is a sample for testing the voice');
    }

    // دالة Text-to-Speech الرئيسية
    function speakText(text, lang = null) {
      if ('speechSynthesis' in window) {
        if (currentAudio) {
          speechSynthesis.cancel();
        }
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = lang || (currentLanguage === 'ar' ? 'ar-SA' : 'en-US');
        utterance.rate = ttsRate;
        utterance.pitch = ttsPitch;
        utterance.volume = 1;
        if (ttsVoice) utterance.voice = ttsVoice;
        // تأثير بصري أثناء التشغيل
        document.body.style.filter = 'brightness(1.15) saturate(1.2)';
        // إضافة تأثير النبض للزر النشط
        const activeBtn = document.querySelector('.audio-btn:hover, .audio-btn:focus');
        if (activeBtn) {
          activeBtn.classList.add('active-playing');
        }
        utterance.onend = function() {
          document.body.style.filter = 'brightness(1)';
          if (activeBtn) {
            activeBtn.classList.remove('active-playing');
          }
          currentAudio = null;
        };
        utterance.onerror = function() {
          document.body.style.filter = 'brightness(1)';
          showNotification('حدث خطأ في تشغيل الصوت');
        };
        speechSynthesis.speak(utterance);
        currentAudio = utterance;
      } else {
        showNotification('المتصفح لا يدعم تشغيل الصوت');
      }
    }
    // متغيرات عامة
    let currentWuduStep = 1;
    let currentAudio = null;
    let duaCounter = 0;
    let isMuted = false;
    let currentLanguage = 'ar';
    let sidebarVisible = true;
    let mobileMenuOpen = false;

    // بيانات خطوات الوضوء
    const wuduSteps = [
      "النية للوضوء في القلب",
      "غسل الكفين ثلاث مرات", 
      "المضمضة والاستنشاق ثلاث مرات",
      "غسل الوجه ثلاث مرات من الأذن إلى الأذن",
      "غسل اليدين إلى المرفقين ثلاث مرات",
      "مسح الرأس والأذنين مرة واحدة",
      "غسل الرجلين إلى الكعبين ثلاث مرات"
    ];

    // بيانات مواقيت الصلاة
    const prayerTimes = {
      fajr: "05:30",
      sunrise: "07:00", 
      dhuhr: "12:45",
      asr: "16:15",
      maghrib: "19:30",
      isha: "21:00"
    };

    // تبديل التبويبات
    function showTab(tabName) {
      // إخفاء جميع التبويبات
      const tabContents = document.querySelectorAll('.tab-content');
      tabContents.forEach(tab => tab.classList.remove('active'));
      
      // إظهار التبويب المحدد
      document.getElementById(tabName).classList.add('active');
      
      // تحديث أزرار التنقل
      const navTabs = document.querySelectorAll('.nav-tab');
      navTabs.forEach(tab => tab.classList.remove('active'));
      
      // تفعيل الزر الحالي
      event.target.classList.add('active');
      
      // إغلاق القائمة المحمولة إذا كانت مفتوحة
      if (mobileMenuOpen) {
        toggleMobileMenu();
      }
      
      // تحديث المحتوى حسب التبويب
      if (tabName === 'times') {
        updatePrayerTimes();
      } else if (tabName === 'qibla') {
        updateQiblaDirection();
      }
    }

    // تبديل القائمة المحمولة
    function toggleMobileMenu() {
      const navTabs = document.getElementById('nav-tabs');
      mobileMenuOpen = !mobileMenuOpen;
      
      if (mobileMenuOpen) {
        navTabs.classList.add('mobile-show');
      } else {
        navTabs.classList.remove('mobile-show');
      }
    }

    // اختيار خطوة الوضوء
    function selectWuduStep(stepNumber) {
      currentWuduStep = stepNumber;
      
      // تحديث العناصر النشطة
      const steps = document.querySelectorAll('#wudu-steps .step-item');
      steps.forEach(step => step.classList.remove('active'));
      steps[stepNumber - 1].classList.add('active');
      
      // تحديث رقم الخطوة
      document.getElementById('wudu-step-number').textContent = stepNumber;
      
      // تحديث شريط التقدم
      updateWuduProgress(stepNumber);
    }

    // تحديث شريط التقدم للوضوء
    function updateWuduProgress(step) {
      const progressFill = document.getElementById('wudu-progress');
      const circumference = 2 * Math.PI * 40; // نصف القطر 40
      const progress = (step / 7) * circumference;
      
      progressFill.style.strokeDashoffset = circumference - progress;
    }

    // تشغيل الصوت للخطوة الحالية
    function playStepAudio() {
      speakText(audioSources[currentLanguage].wudu_steps[wuduCurrentStep - 1]);
    }

    // إعادة تعيين الوضوء
    function resetWudu() {
      currentWuduStep = 1;
      selectWuduStep(1);
      updateWuduProgress(1);
      showNotification('تم إعادة تعيين دليل الوضوء');
    }

    // إيقاف مؤقت للصوت
    function pauseAudio() {
      if (currentAudio && speechSynthesis.speaking) {
        speechSynthesis.cancel();
        document.body.style.filter = 'brightness(1)';
        document.querySelectorAll('.active-playing').forEach(btn => {
          btn.classList.remove('active-playing');
        });
      }
    }

    // تشغيل خطوات الصلاة
    function playPrayerStep(stepNumber) {
      if (isMuted) return;
      
      const prayerSteps = [
        "القيام مع القدرة",
        "تكبيرة الإحرام", 
        "قراءة الفاتحة",
        "الركوع والرفع منه",
        "السجود والجلوس بين السجدتين",
        "الجلوس للتشهد الأخير",
        "السلام"
      ];
      
      showNotification(`تشغيل شرح: ${prayerSteps[stepNumber - 1]}`);
      
      // تأثير بصري
      const steps = document.querySelectorAll('.step-item');
      steps.forEach(step => step.classList.remove('active'));
      if (steps[stepNumber - 1]) {
        steps[stepNumber - 1].classList.add('active');
      }
    }

    // تشغيل خطوات الصلاة المفصلة  
    function playDetailedPrayerStep(stepNumber) {
      if (isMuted) return;
      
      const detailedSteps = [
        "استقبال القبلة والنية",
        "تكبيرة الإحرام: الله أكبر",
        "دعاء الاستفتاح",
        "قراءة الفاتحة وسورة",
        "الركوع مع التسبيح",
        "الرفع من الركوع", 
        "السجود مرتين",
        "التشهد والسلام"
      ];
      
      showNotification(`تشغيل شرح: ${detailedSteps[stepNumber - 1]}`);
    }

    // تشغيل أذان الشيوخ
    function playAdhanSheikh(sheikhName) {
      if (isMuted) return;
      
      const sheikhs = {
        mishary: "الشيخ مشاري العفاسي",
        maher: "الشيخ ماهر المعيقلي", 
        sudais: "الشيخ عبد الرحمن السديس",
        ghamdi: "الشيخ سعد الغامدي",
        tablawi: "الشيخ محمد الطبلاوي",
        rifai: "الشيخ محمد رفعت"
      };
      
      showNotification(`تشغيل أذان: ${sheikhs[sheikhName]}`);
      
      // تأثير بصري على البطاقة
      const cards = document.querySelectorAll('.sheikh-card');
      cards.forEach(card => card.classList.remove('active-playing'));
      
      event.target.closest('.sheikh-card').classList.add('active-playing');
      
      setTimeout(() => {
        event.target.closest('.sheikh-card').classList.remove('active-playing');
      }, 5000);
    }

    // البحث عن القبلة
    function findQibla() {
      showNotification('جاري تحديد موقعك وحساب اتجاه القبلة...');
      
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          position => {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            
            // حساب اتجاه القبلة (محاكاة)
            const qiblaDirection = calculateQibla(lat, lng);
            document.getElementById('qibla-direction').textContent = qiblaDirection;
            
            showNotification(`تم تحديد اتجاه القبلة: ${qiblaDirection}`);
          },
          error => {
            showNotification('لم يتمكن من تحديد موقعك. يرجى السماح بالوصول للموقع.');
          }
        );
      } else {
        showNotification('متصفحك لا يدعم تحديد الموقع الجغرافي');
      }
    }

    // حساب اتجاه القبلة
    function calculateQibla(lat, lng) {
      // إحداثيات الكعبة المشرفة
      const meccaLat = 21.4225;
      const meccaLng = 39.8262;
      
      // حساب الاتجاه (محاكاة مبسطة)
      const deltaLng = meccaLng - lng;
      
      if (deltaLng > 0 && lat > meccaLat) return "شمال شرق";
      if (deltaLng > 0 && lat < meccaLat) return "جنوب شرق"; 
      if (deltaLng < 0 && lat > meccaLat) return "شمال غرب";
      return "جنوب غرب";
    }

    // معايرة البوصلة
    function calibrateCompass() {
      showNotification('جاري معايرة البوصلة...');
      
      // تأثير بصري للمعايرة
      const compass = document.querySelector('.qibla-compass');
      compass.style.animation = 'none';
      
      setTimeout(() => {
        compass.style.animation = 'rotate 20s linear infinite';
        showNotification('تم معايرة البوصلة بنجاح');
      }, 2000);
    }

    // تشغيل الأدعية
    function playDua(duaType) {
      if (isMuted) return;
      
      const duas = {
        shahada: "الشهادة",
        tasbih: "التسبيح", 
        after_prayer: "دعاء ما بعد الصلاة"
      };
      
      showNotification(`تشغيل: ${duas[duaType]}`);
      
      // تأثير بصري
      event.target.closest('.dua-card').classList.add('active-playing');
      setTimeout(() => {
        event.target.closest('.dua-card').classList.remove('active-playing');
      }, 3000);
    }

    // تكرار الدعاء
    function repeatDua(duaType) {
      showNotification('تم تفعيل وضع التكرار');
    }

    // بدء العداد
    function startCounter() {
      duaCounter++;
      document.getElementById('counter').textContent = duaCounter;
      
      // تأثير بصري
      const counterBadge = document.getElementById('counter');
      counterBadge.style.transform = 'scale(1.2)';
      setTimeout(() => {
        counterBadge.style.transform = 'scale(1)';
      }, 200);
      
      if (duaCounter % 33 === 0) {
        showNotification(`مبارك! أكملت ${duaCounter} تسبيحة`);
      }
    }

    // تشغيل الأذان العام
    function playGeneralAdhan() {
      if (isMuted) return;
      
      showNotification('تشغيل الأذان...');
      
      // تأثير بصري
      const btn = event.target;
      btn.classList.add('active-playing');
      setTimeout(() => {
        btn.classList.remove('active-playing');
      }, 5000);
    }

    // تغيير اللغة
    function setLanguage(language) {
      currentLanguage = language;
      
      // تحديث أزرار اللغة
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.getElementById(`lang-${language}`).classList.add('active');
      
      if (language === 'en') {
        showNotification('Language changed to English');
        // هنا يمكن إضافة ترجمة المحتوى
      } else {
        showNotification('تم تغيير اللغة إلى العربية');
      }
    }

    // اختبار الصوت
    function testAudio() {
      if (isMuted) return;
      showNotification('اختبار الصوت - يعمل بشكل طبيعي');
    }

    // كتم/إلغاء كتم الصوت
    function toggleMute() {
      isMuted = !isMuted;
      const icon = event.target.querySelector('i');
      
      if (isMuted) {
        icon.className = 'fas fa-volume-mute';
        showNotification('تم كتم الصوت');
      } else {
        icon.className = 'fas fa-volume-high';
        showNotification('تم إلغاء كتم الصوت');
      }
    }

    // تبديل المظهر
    function toggleTheme() {
      showNotification('ميزة تغيير المظهر ستتوفر قريباً');
    }

    // إعادة تعيين الإعدادات
    function resetSettings() {
      currentLanguage = 'ar';
      isMuted = false;
      duaCounter = 0;
      
      // إعادة تعيين واجهة اللغة
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.getElementById('lang-ar').classList.add('active');
      
      // إعادة تعيين العداد
      document.getElementById('counter').textContent = '0';
      
      showNotification('تم إعادة تعيين جميع الإعدادات');
    }

    // عرض الإشعارات
    function showNotification(message) {
      const notification = document.getElementById('notification');
      const messageElement = notification.querySelector('p');
      
      if (messageElement) {
        messageElement.textContent = message;
      }
      
      notification.classList.add('show');
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    // تشغيل الصوت الترحيبي
    function playWelcomeAudio() {
      speakText(audioSources[currentLanguage].welcome);
    }

    // تحديث مواقيت الصلاة
    function updatePrayerTimes() {
      const now = new Date();
      const currentTime = now.getHours() + ':' + (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();
      
      // تحديد الصلاة الحالية (محاكاة)
      document.querySelectorAll('.prayer-time').forEach(time => {
        time.classList.remove('current');
      });
      
      // تمييز صلاة الظهر كمثال
      const dhuhrTime = document.querySelector('.prayer-time:nth-child(3)');
      if (dhuhrTime) {
        dhuhrTime.classList.add('current');
      }
    }

    // تحديث اتجاه القبلة
    function updateQiblaDirection() {
      // محاكاة تحديث اتجاه القبلة
      const directions = ['شمال شرق', 'شرق', 'جنوب شرق', 'جنوب'];
      const randomDirection = directions[Math.floor(Math.random() * directions.length)];
      
      const qiblaElement = document.getElementById('qibla-direction');
      if (qiblaElement) {
        qiblaElement.textContent = randomDirection;
      }
    }

    // تهيئة التطبيق عند التحميل
    document.addEventListener('DOMContentLoaded', function() {
      // تحديث مواقيت الصلاة
      updatePrayerTimes();
      
      // تحديث شريط تقدم الوضوء
      updateWuduProgress(1);
      
      // إعداد التحديث التلقائي للوقت
      setInterval(updatePrayerTimes, 60000); // كل دقيقة
      
      // رسالة ترحيب
      setTimeout(() => {
        showNotification('مرحباً بك! اختر القسم الذي تريد التعلم منه');
      }, 1000);
    });

    // التعامل مع تغيير حجم الشاشة
    window.addEventListener('resize', function() {
      // إغلاق القائمة المحمولة عند تكبير الشاشة
      if (window.innerWidth > 768 && mobileMenuOpen) {
        toggleMobileMenu();
      }
    });

    // منع النقر المتعدد السريع
    let clickTimeout = false;
    document.addEventListener('click', function(e) {
      if (clickTimeout) return;
      clickTimeout = true;
      setTimeout(() => clickTimeout = false, 300);
    });

    // تأثيرات إضافية للتفاعل
    document.addEventListener('mousemove', function(e) {
      const floatingShapes = document.querySelectorAll('.floating-shape');
      floatingShapes.forEach((shape, index) => {
        const speed = 0.02 + (index * 0.01);
        const x = (e.clientX * speed) - (shape.offsetWidth / 2);
        const y = (e.clientY * speed) - (shape.offsetHeight / 2);
        
        shape.style.transform = `translate(${x}px, ${y}px)`;
      });
    });

    // حفظ التقدم محلياً (بدون localStorage حسب المتطلبات)
    let appState = {
      currentStep: 1,
      counter: 0,
      language: 'ar',
      muted: false
    };

    // تصدير دوال للاستخدام العام
    window.prayerGuideApp = {
      showTab,
      toggleMobileMenu,
      selectWuduStep,
      playStepAudio,
      resetWudu,
      pauseAudio,
      playPrayerStep,
      playDetailedPrayerStep,
      playAdhanSheikh,
      findQibla,
      calibrateCompass,
      playDua,
      repeatDua,
      startCounter,
      playGeneralAdhan,
      setLanguage,
      testAudio,
      toggleMute,
      toggleTheme,
      resetSettings,
      showNotification,
      playWelcomeAudio
    };
  </script>
</body>
</html>